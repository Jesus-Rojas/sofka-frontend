"use strict";(self.webpackChunksofka_frontend=self.webpackChunksofka_frontend||[]).push([[392],{2392:($,h,r)=>{r.r(h),r.d(h,{PreguntasRespuestasModule:()=>H});var a=r(8583),u=r(4330),t=r(7716),Z=r(7709),p=r(2340),d=r(1841);let x=(()=>{class e{constructor(n){this.http=n,this.url=p.N.api}getData(n){return this.http.post(`${this.url}/jugador`,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_=(()=>{class e{constructor(n,o){this.api=n,this.router=o,this.usuarioSubject=new Z.xQ,this.usuario=this.usuarioSubject.asObservable()}getDataUser(n){this.api.getData(n).subscribe(({nombre:o})=>{localStorage.setItem("jugador",o),this.usuarioSubject.next(o),this.router.navigateByUrl("/cuestionario")})}getDataUserLogin(){const o={nombre:localStorage.getItem("jugador").trim().toLowerCase()};this.api.getData(o).subscribe(({nombre:s})=>{this.usuarioSubject.next(s)})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(x),t.LFG(u.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(n){this.http=n,this.url=p.N.api}validarIntento(n){return this.http.post(`${this.url}/intento`,n)}respuesta(n){return this.http.post(`${this.url}/respuesta`,n)}salir(n){return this.http.post(`${this.url}/salir`,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function C(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"0"),t.qZA())}function T(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"10"),t.qZA())}function w(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"20"),t.qZA())}function A(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"30"),t.qZA())}function S(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"40"),t.qZA())}function y(e,i){1&e&&t._UZ(0,"span")}function U(e,i){1&e&&t.GkF(0)}function k(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"button",20),t.NdJ("click",function(){t.CHM(n);const s=t.oxw().$implicit;return t.oxw().answer(s.id)}),t._uU(2),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(),o=n.index,s=n.$implicit;t.xp6(1),t.Gre("btn ",o+1==2?"btn-warning":"btn-info"," w-75 h-100 py-4 text-white"),t.Q6J("disabled",s.disabled),t.xp6(1),t.hij(" ",s.nombre," ")}}function q(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"button",20),t.NdJ("click",function(){t.CHM(n);const s=t.oxw().$implicit;return t.oxw().answer(s.id)}),t._uU(2),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(),o=n.index,s=n.$implicit;t.xp6(1),t.Gre("btn ",o+1==1?"btn-danger":"btn-secondary"," w-75 h-100 py-4 text-white"),t.Q6J("disabled",s.disabled),t.xp6(1),t.hij(" ",s.nombre," ")}}function I(e,i){if(1&e&&(t.ynx(0),t.YNc(1,U,1,0,"ng-container",16),t.YNc(2,k,3,5,"ng-template",null,17,t.W1O),t.YNc(4,q,3,5,"ng-template",null,18,t.W1O),t.BQk()),2&e){const n=i.index,o=t.MAs(3),s=t.MAs(5);t.xp6(1),t.Q6J("ngIf",(n+1)%2==0)("ngIfThen",o)("ngIfElse",s)}}function F(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"h1",23),t.TgZ(2,"div",24),t.NdJ("click",function(){return t.CHM(n),t.oxw().salir()}),t.O4$(),t.TgZ(3,"svg",25),t._UZ(4,"path",26),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}let j=(()=>{class e{constructor(n,o,s){this.logicUser=n,this.apiPregunta=o,this.router=s,this.usuario=this.logicUser.usuario,this.respuestas=[],this.dificultad="",this.disabledExit=!1}ngOnInit(){const n=localStorage.getItem("jugador");n&&n.trim().length>0?(this.jugador=n,this.logicUser.getDataUserLogin()):(localStorage.clear(),this.router.navigateByUrl("/home")),this.jugadorSubscription=this.usuario.subscribe(o=>{this.jugador=o,this.existeIntento()})}existeIntento(){const n={nombre:this.jugador.trim().toLowerCase()};this.apiPregunta.validarIntento(n).subscribe(({id:o,rondas:s,preguntas:c})=>{this.idLogica=o,this.preguntas=c.nombre,this.respuestas=c.opciones.map(g=>(g.disabled=!1,g)),this.dificultad=s.nombre,this.ronda=s.id})}answer(n){this.respuestas=this.respuestas.map(s=>(s.disabled=!0,s)),this.disabledExit=!0,this.apiPregunta.respuesta({id:this.idLogica,respuesta_id:n}).subscribe(({res:s,termino:c,pregunta:g})=>{if(c)s?(alertify.success("Felicitaciones terminaste todo el cuestionario. Verifica el ranking de puntos."),localStorage.clear(),this.router.navigateByUrl("/home")):(alertify.error("Mas suerte para la proxima."),localStorage.clear(),this.router.navigateByUrl("/home"));else{const{id:B,rondas:m,preguntas:f}=g;this.idLogica=B,this.preguntas=f.nombre,this.respuestas=f.opciones.map(b=>(b.disabled=!1,b)),this.dificultad=m.nombre,this.ronda=m.id,this.disabledExit=!1,alertify.success(`Felicitaciones, ganaste 10 puntos. Pasaste a la ronda ${m.id}`)}})}salir(){this.respuestas=this.respuestas.map(o=>(o.disabled=!0,o)),this.disabledExit=!0,this.apiPregunta.salir({id:this.idLogica,idPregunta:this.respuestas[0].preguntas_id}).subscribe(o=>{alertify.success(`Quedaste en la ronda ${this.ronda}, su puntuacion es de ${1==this.ronda?"":this.ronda-1}0. Verifica el ranking de puntos`),localStorage.clear(),this.router.navigateByUrl("/home")})}ngOnDestroy(){this.jugadorSubscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_),t.Y36(v),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cuestionario"]],decls:25,vars:11,consts:[[1,"background-custom"],[1,"px-5","pb-5"],[1,"row","mt-5","pt-2","pb-5"],[1,"text-left","pb-5","col-4","text-white"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"text-center","pb-5","col-4","text-white"],[1,"text-right","pb-5","col-4","text-white"],[1,"text-center","pb-5","pt-5","col-12","text-white"],[1,"col-12","pt-5","pb-5"],[1,"col-2"],[1,"border","border-1","border-success","col-8","py-5"],[1,"row"],[4,"ngFor","ngForOf"],["class","col-12 pb-5",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenTemplate",""],["elseTemplate",""],[1,"col-6","mb-2","px-4","py-1","text-left"],[3,"disabled","click"],[1,"col-6","mb-2","px-4","py-1","text-right"],[1,"col-12","pb-5"],[1,"text-center","text-white"],[1,"custom-svg","d-inline-block",3,"click"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","times","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 352 512",1,"svg-inline--fa","fa-times","fa-w-11"],["fill","currentColor","d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]],template:function(n,o){1&n&&(t._UZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h4",3),t._uU(4," Puntos: "),t.TgZ(5,"span",4),t.YNc(6,C,2,0,"span",5),t.YNc(7,T,2,0,"span",5),t.YNc(8,w,2,0,"span",5),t.YNc(9,A,2,0,"span",5),t.YNc(10,S,2,0,"span",5),t.YNc(11,y,1,0,"span",6),t.qZA(),t.qZA(),t.TgZ(12,"h4",7),t._uU(13),t.qZA(),t.TgZ(14,"h4",8),t._uU(15),t.qZA(),t.TgZ(16,"h1",9),t._uU(17),t.qZA(),t._UZ(18,"div",10),t._UZ(19,"div",11),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.YNc(22,I,6,3,"ng-container",14),t.qZA(),t.qZA(),t._UZ(23,"div",11),t.qZA(),t.qZA(),t.YNc(24,F,5,0,"div",15)),2&n&&(t.xp6(5),t.Q6J("ngSwitch",o.ronda),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(3),t.Oqu(o.dificultad),t.xp6(2),t.hij("Ronda ",o.ronda," de 5"),t.xp6(2),t.Oqu(o.preguntas),t.xp6(5),t.Q6J("ngForOf",o.respuestas),t.xp6(2),t.Q6J("ngIf",!o.disabledExit))},directives:[a.RF,a.n9,a.ED,a.sg,a.O5],styles:[".background-custom[_ngcontent-%COMP%]{background-image:url(/assets/img/background.jpg);background-size:cover;min-height:100vh;min-width:100vw;position:fixed;top:0}.custom-svg[_ngcontent-%COMP%]{width:2.7rem;cursor:pointer}.border-1[_ngcontent-%COMP%]{border-width:.3rem!important}"]}),e})();var l=r(665);let N=(()=>{class e{constructor(n){this.logicUser=n,this.nombre=""}ngOnInit(){}validarInput(){this.nombre=this.nombre.trim()}startGame(){if(this.nombre.length>0){const n={nombre:this.nombre.trim().toLowerCase()};this.logicUser.getDataUser(n)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-section-ingreso"]],decls:8,vars:1,consts:[[1,"mt-5","pt-3"],["role","alert",1,"alert","custom-alert","mx-auto","mt-5","pb-5","border","border-1"],[1,"text-center","text-success","mt-5","pt-3","mb-5"],["type","text","placeholder","Ingrese su nombre...",1,"w-25","text-center","m-auto","form-control","bg-dark","border-dark","text-success",3,"ngModel","ngModelChange","change"],[1,"text-center","pt-3","pb-4"],[1,"btn","btn-light","bg-dark","mx-auto","text-success","border-dark",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2",2),t._uU(3," Cuestionario de preguntas y respuestas "),t.qZA(),t.TgZ(4,"input",3),t.NdJ("ngModelChange",function(c){return o.nombre=c})("change",function(){return o.nombre=o.nombre.trim()}),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.startGame()}),t._uU(7,"Iniciar Juego"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre))},directives:[l.Fj,l.JJ,l.On],styles:[".custom-alert[_ngcontent-%COMP%]{width:60%}"]}),e})(),J=(()=>{class e{constructor(n){this.http=n,this.url=p.N.api}historial(){return this.http.get(`${this.url}/historial`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function M(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",10),t._uU(2),t.qZA(),t.BQk()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",n.jugadores.nombre," ")}}function P(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",10),t._uU(2),t.qZA(),t.BQk()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",n.puntuacion," ")}}let O=(()=>{class e{constructor(n){this.apiHistorial=n}ngOnInit(){this.apiHistorial.historial().subscribe(n=>{this.jugadores=n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-section-historial"]],decls:17,vars:2,consts:[[1,"mt-5","pt-3"],["role","alert",1,"alert","w-50","mx-auto","mt-3","pb-5","border","border-1"],[1,"text-center","text-success","mt-5","mb-4"],[1,"px-5","text-center"],[1,"row","pt-2"],[1,"col-6","text-left"],[1,"text-info"],[1,"col-6"],[1,"row"],[4,"ngFor","ngForOf"],[1,"text-capitalize","text-white","d-block"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2",2),t._uU(3," Ranking de puntos "),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"h4",6),t._uU(8,"Nombre"),t.qZA(),t.qZA(),t.TgZ(9,"div",7),t.TgZ(10,"h4",6),t._uU(11,"Puntuacion"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"div",5),t.YNc(14,M,3,1,"ng-container",9),t.qZA(),t.TgZ(15,"div",7),t.YNc(16,P,3,1,"ng-container",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(14),t.Q6J("ngForOf",o.jugadores),t.xp6(2),t.Q6J("ngForOf",o.jugadores))},directives:[a.sg],styles:[".custom-alert[_ngcontent-%COMP%]{width:60%}"]}),e})();const Y=function(e){return{"background-image":e}},L=[{path:"home",component:(()=>{class e{constructor(n){this.router=n,this.rutaBackground=`url(${p.N.img}/assets/img/background.jpg)`}ngOnInit(){const n=localStorage.getItem("jugador");n&&n.trim().length>0&&this.router.navigateByUrl("/cuestionario")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:3,vars:3,consts:[[1,"background-custom",3,"ngStyle"]],template:function(n,o){1&n&&(t._UZ(0,"div",0),t._UZ(1,"app-section-ingreso"),t._UZ(2,"app-section-historial")),2&n&&t.Q6J("ngStyle",t.VKq(1,Y,o.rutaBackground))},directives:[a.PC,N,O],styles:[".background-custom[_ngcontent-%COMP%]{background-size:cover;min-height:100vh;min-width:100vw;position:fixed;top:0}"]}),e})()},{path:"cuestionario",component:j},{path:"**",redirectTo:"home"}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(L)],u.Bz]}),e})(),H=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez,Q,l.u5]]}),e})()}}]);